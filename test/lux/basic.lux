[doc Testing DrNED-XMNR integration with NCS and DrNED]

[include common.luxinc]

[shell os]
    [invoke ned-test-setup]
    !ncs-make-package --netconf-ned ../../yang ned
    [invoke shell-check]
    [timeout 10]
    !make -C ned/src all
    [invoke shell-check]
    [timeout]
    !cd ..
    [invoke start-ncs-netsim ned]

[shell ncs-cli]
    [invoke prepare-test ned0]
    !config dhcp defaultLeaseTime 200s
    !commit
    ???Commit complete.
    !drned-xmnr state record-state state-name time
    ???success
    !config dhcp SharedNetworks sharedNetwork test SubNets subNet 1.1.1.1 255.255.255.0
    !commit
    ???Commit complete.
    !drned-xmnr state record-state state-name subnet
    ???success
    !drned-xmnr state check-states validate true
    ???success all states are consistent
    [invoke test-walk-states "empty subnet time"]

[cleanup]
    [invoke cleanup]
