Found 3 states recorded for device dhcp0 which gives a total of 6 transitions.
Starting with state empty
=============================================== test session starts ================================================
platform linux -- Python 3.8.5, pytest-6.2.2, py-1.9.0, pluggy-0.13.1
rootdir: /opt/ncs/xmnr-run/dhcp0/test/drned-skeleton, configfile: setup.cfg
plugins: nbval-0.9.6, cov-2.10.1, pyfakefs-4.3.3
collected 633 items / 632 deselected / 1 selected

src/test_builtin.py complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:07.352 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:07.430 UTC+01:00
do show ncs-state | include "ncs-state version"
Thu Feb  11 17:11:07.510 UTC+01:00
ncs-state version 5.4.1
NOTE: Commit queues are enabled!
============================== load(./dhcp0.cfg)
load merge ./dhcp0.cfg | best-effort
Thu Feb  11 17:11:07.741 UTC+01:00
Loading.
Warning: best-effort is not supported for XML files
505 bytes parsed in 0.01 sec (36.82 KiB/sec)
commit
Thu Feb  11 17:11:07.814 UTC+01:00
% No modifications to commit.
no devices device dhcp0 ned-settings use-transaction-id
Thu Feb  11 17:11:07.881 UTC+01:00
commit
Thu Feb  11 17:11:07.952 UTC+01:00
% No modifications to commit.
devices global-settings session-pool idle-time 600
Thu Feb  11 17:11:08.170 UTC+01:00
devices global-settings commit-queue retry-attempts 2
Thu Feb  11 17:11:08.780 UTC+01:00
devices device dhcp0 trace raw
Thu Feb  11 17:11:08.139 UTC+01:00
java-vm java-logging logger com.tailf.packages.ned level level-all
Thu Feb  11 17:11:08.206 UTC+01:00
show full-configuration devices device dhcp0
devices device dhcp0
 address         127.0.0.1
 port            12022
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
 authgroup       default
 device-type netconf ned-id dhcpned-nc-1.0
 connect-timeout 60
 read-timeout    7200
 write-timeout   7200
 trace           raw
 no-lsa
 state admin-state unlocked
!

show full-configuration devices device dhcp0 device-type
Thu Feb  11 17:11:08.362 UTC+01:00
devices device dhcp0
 device-type netconf ned-id dhcpned-nc-1.0
!
show full-configuration devices device dhcp0 ssh
Thu Feb  11 17:11:08.429 UTC+01:00
devices device dhcp0
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
!
commit
Thu Feb  11 17:11:08.502 UTC+01:00
% No modifications to commit.
show full-configuration devices device dhcp0 read-timeout
Thu Feb  11 17:11:08.565 UTC+01:00
devices device dhcp0
 read-timeout 7200
!
devices device dhcp0 connect
Thu Feb  11 17:11:08.631 UTC+01:00
result true
info (admin) Connected to dhcp0 - 127.0.0.1:12022
============================== sync_from()
devices device dhcp0 sync-from
Thu Feb  11 17:11:08.869 UTC+01:00
result true
top
Thu Feb  11 17:11:09.100 UTC+01:00

test_template_raw[empty.state.xml]

============================== load(../states/empty.state.xml)
NOTE: Get load parameters from ../states/empty.state.xml.load
no devices device dhcp0 config
Thu Feb  11 17:11:09.910 UTC+01:00
load merge ../states/empty.state.xml
Thu Feb  11 17:11:09.153 UTC+01:00
Loading.
169 bytes parsed in 0.00 sec (31.65 KiB/sec)
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:09.277 UTC+01:00
% No modifications to commit.

commit commit-queue sync
Thu Feb  11 17:11:09.336 UTC+01:00
% No modifications to commit.
NOTE: Commit id: None
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:09.445 UTC+01:00
.

================================== 1 passed, 632 deselected, 20 warnings in 2.77s ==================================
Transition 1/6: empty ==> s-subnet3:1
=============================================== test session starts ================================================
platform linux -- Python 3.8.5, pytest-6.2.2, py-1.9.0, pluggy-0.13.1
rootdir: /opt/ncs/xmnr-run/dhcp0/test/drned-skeleton, configfile: setup.cfg
plugins: nbval-0.9.6, cov-2.10.1, pyfakefs-4.3.3
collected 633 items / 632 deselected / 1 selected

src/test_builtin.py complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:10.679 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:10.757 UTC+01:00
do show ncs-state | include "ncs-state version"
Thu Feb  11 17:11:10.820 UTC+01:00
ncs-state version 5.4.1
NOTE: Commit queues are enabled!
============================== load(./dhcp0.cfg)
load merge ./dhcp0.cfg | best-effort
Thu Feb  11 17:11:11.260 UTC+01:00
Loading.
Warning: best-effort is not supported for XML files
505 bytes parsed in 0.00 sec (163.35 KiB/sec)
commit
Thu Feb  11 17:11:11.840 UTC+01:00
% No modifications to commit.
no devices device dhcp0 ned-settings use-transaction-id
Thu Feb  11 17:11:11.152 UTC+01:00
commit
Thu Feb  11 17:11:11.209 UTC+01:00
% No modifications to commit.
devices global-settings session-pool idle-time 600
Thu Feb  11 17:11:11.273 UTC+01:00
devices global-settings commit-queue retry-attempts 2
Thu Feb  11 17:11:11.333 UTC+01:00
devices device dhcp0 trace raw
Thu Feb  11 17:11:11.393 UTC+01:00
java-vm java-logging logger com.tailf.packages.ned level level-all
Thu Feb  11 17:11:11.457 UTC+01:00
show full-configuration devices device dhcp0
devices device dhcp0
 address         127.0.0.1
 port            12022
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
 authgroup       default
 device-type netconf ned-id dhcpned-nc-1.0
 connect-timeout 60
 read-timeout    7200
 write-timeout   7200
 trace           raw
 no-lsa
 state admin-state unlocked
!

show full-configuration devices device dhcp0 device-type
Thu Feb  11 17:11:11.614 UTC+01:00
devices device dhcp0
 device-type netconf ned-id dhcpned-nc-1.0
!
show full-configuration devices device dhcp0 ssh
Thu Feb  11 17:11:11.684 UTC+01:00
devices device dhcp0
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
!
commit
Thu Feb  11 17:11:11.769 UTC+01:00
% No modifications to commit.
show full-configuration devices device dhcp0 read-timeout
Thu Feb  11 17:11:11.828 UTC+01:00
devices device dhcp0
 read-timeout 7200
!
devices device dhcp0 connect
Thu Feb  11 17:11:11.898 UTC+01:00
result true
info (admin) Connected to dhcp0 - 127.0.0.1:12022
============================== sync_from()
devices device dhcp0 sync-from
Thu Feb  11 17:11:11.988 UTC+01:00
result true
top
Thu Feb  11 17:11:12.142 UTC+01:00

test_template_single[s-subnet3:1.state.xml]

============================== save(drned-work/before-session.xml)
save drned-work/before-session.xml xml devices device dhcp0 config
Thu Feb  11 17:11:12.215 UTC+01:00
Saving parts of the configuration.
============================== save(drned-work/before-session.cfg)
save drned-work/before-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:12.315 UTC+01:00
Saving devices device dhcp0 config
============================== save(drned-work/before-test.cfg)
save drned-work/before-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:12.382 UTC+01:00
Saving devices device dhcp0 config
============================== load(../states/s-subnet3:1.state.xml)
NOTE: Get load parameters from ../states/s-subnet3:1.state.xml.load
no devices device dhcp0 config
Thu Feb  11 17:11:12.453 UTC+01:00
load merge ../states/s-subnet3:1.state.xml
Thu Feb  11 17:11:12.513 UTC+01:00
Loading.
589 bytes parsed in 0.01 sec (53.27 KiB/sec)
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:12.615 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="7">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet>
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                         <range>
                           <high-addr>192.168.128.89</high-addr>
                           <low-addr>192.168.128.60</low-addr>
                         </range>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:12.717 UTC+01:00
commit-queue {
    id 1613059872758
    status completed
}
Commit complete.
NOTE: Commit id: 10838
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:13.132 UTC+01:00
============================== rollback()
rollback configuration
Thu Feb  11 17:11:13.253 UTC+01:00
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:13.534 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="17">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"
                               nc:operation="delete">
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:13.617 UTC+01:00
commit-queue {
    id 1613059873643
    status completed
}
Commit complete.
NOTE: Commit id: 10839
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:13.976 UTC+01:00
============================== save(drned-work/after-test.cfg)
save drned-work/after-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:14.119 UTC+01:00
Saving devices device dhcp0 config
.
### TEARDOWN, RESTORE DEVICE ###
complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:14.592 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:14.668 UTC+01:00
no devices device dhcp0 config
Thu Feb  11 17:11:14.742 UTC+01:00
top
Thu Feb  11 17:11:14.805 UTC+01:00
============================== load(drned-work/before-session.xml)
load merge drned-work/before-session.xml
Thu Feb  11 17:11:14.868 UTC+01:00
Loading.
0 bytes parsed in 0.01 sec (0 bytes/sec)
show config
Thu Feb  11 17:11:14.943 UTC+01:00
% No configuration changes found.
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:15.990 UTC+01:00
commit no-networking
Thu Feb  11 17:11:15.156 UTC+01:00
% No modifications to commit.
NOTE: Commit id: None
============================== sync_to()
devices device dhcp0 sync-to
Thu Feb  11 17:11:15.245 UTC+01:00
result true
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:15.334 UTC+01:00
============================== save(drned-work/after-session.cfg)
save drned-work/after-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:15.462 UTC+01:00
Saving devices device dhcp0 config


================================== 1 passed, 632 deselected, 19 warnings in 5.41s ==================================
Transition 2/6: empty ==> s-subnet3:2
=============================================== test session starts ================================================
platform linux -- Python 3.8.5, pytest-6.2.2, py-1.9.0, pluggy-0.13.1
rootdir: /opt/ncs/xmnr-run/dhcp0/test/drned-skeleton, configfile: setup.cfg
plugins: nbval-0.9.6, cov-2.10.1, pyfakefs-4.3.3
collected 633 items / 632 deselected / 1 selected

src/test_builtin.py complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:16.631 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:16.706 UTC+01:00
do show ncs-state | include "ncs-state version"
Thu Feb  11 17:11:16.765 UTC+01:00
ncs-state version 5.4.1
NOTE: Commit queues are enabled!
============================== load(./dhcp0.cfg)
load merge ./dhcp0.cfg | best-effort
Thu Feb  11 17:11:16.964 UTC+01:00
Loading.
Warning: best-effort is not supported for XML files
505 bytes parsed in 0.00 sec (167.17 KiB/sec)
commit
Thu Feb  11 17:11:17.220 UTC+01:00
% No modifications to commit.
no devices device dhcp0 ned-settings use-transaction-id
Thu Feb  11 17:11:17.880 UTC+01:00
commit
Thu Feb  11 17:11:17.146 UTC+01:00
% No modifications to commit.
devices global-settings session-pool idle-time 600
Thu Feb  11 17:11:17.208 UTC+01:00
devices global-settings commit-queue retry-attempts 2
Thu Feb  11 17:11:17.269 UTC+01:00
devices device dhcp0 trace raw
Thu Feb  11 17:11:17.330 UTC+01:00
java-vm java-logging logger com.tailf.packages.ned level level-all
Thu Feb  11 17:11:17.398 UTC+01:00
show full-configuration devices device dhcp0
devices device dhcp0
 address         127.0.0.1
 port            12022
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
 authgroup       default
 device-type netconf ned-id dhcpned-nc-1.0
 connect-timeout 60
 read-timeout    7200
 write-timeout   7200
 trace           raw
 no-lsa
 state admin-state unlocked
!

show full-configuration devices device dhcp0 device-type
Thu Feb  11 17:11:17.557 UTC+01:00
devices device dhcp0
 device-type netconf ned-id dhcpned-nc-1.0
!
show full-configuration devices device dhcp0 ssh
Thu Feb  11 17:11:17.618 UTC+01:00
devices device dhcp0
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
!
commit
Thu Feb  11 17:11:17.677 UTC+01:00
% No modifications to commit.
show full-configuration devices device dhcp0 read-timeout
Thu Feb  11 17:11:17.740 UTC+01:00
devices device dhcp0
 read-timeout 7200
!
devices device dhcp0 connect
Thu Feb  11 17:11:17.810 UTC+01:00
result true
info (admin) Connected to dhcp0 - 127.0.0.1:12022
============================== sync_from()
devices device dhcp0 sync-from
Thu Feb  11 17:11:17.896 UTC+01:00
result true
top
Thu Feb  11 17:11:18.380 UTC+01:00

test_template_single[s-subnet3:2.state.xml]

============================== save(drned-work/before-session.xml)
save drned-work/before-session.xml xml devices device dhcp0 config
Thu Feb  11 17:11:18.103 UTC+01:00
Saving parts of the configuration.
============================== save(drned-work/before-session.cfg)
save drned-work/before-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:18.180 UTC+01:00
Saving devices device dhcp0 config
============================== save(drned-work/before-test.cfg)
save drned-work/before-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:18.266 UTC+01:00
Saving devices device dhcp0 config
============================== load(../states/s-subnet3:2.state.xml)
NOTE: Get load parameters from ../states/s-subnet3:2.state.xml.load
no devices device dhcp0 config
Thu Feb  11 17:11:18.354 UTC+01:00
load merge ../states/s-subnet3:2.state.xml
Thu Feb  11 17:11:18.414 UTC+01:00
Loading.
589 bytes parsed in 0.00 sec (72.21 KiB/sec)
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:18.529 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="33">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet>
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                         <range>
                           <high-addr>192.168.128.89</high-addr>
                           <low-addr>192.168.128.60</low-addr>
                         </range>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:18.622 UTC+01:00
commit-queue {
    id 1613059878640
    status completed
}
Commit complete.
NOTE: Commit id: 10840
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:18.865 UTC+01:00
============================== rollback()
rollback configuration
Thu Feb  11 17:11:19.900 UTC+01:00
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:19.307 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="43">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"
                               nc:operation="delete">
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:19.415 UTC+01:00
commit-queue {
    id 1613059879441
    status completed
}
Commit complete.
NOTE: Commit id: 10841
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:19.734 UTC+01:00
============================== save(drned-work/after-test.cfg)
save drned-work/after-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:19.862 UTC+01:00
Saving devices device dhcp0 config
.
### TEARDOWN, RESTORE DEVICE ###
complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:20.330 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:20.403 UTC+01:00
no devices device dhcp0 config
Thu Feb  11 17:11:20.472 UTC+01:00
top
Thu Feb  11 17:11:20.532 UTC+01:00
============================== load(drned-work/before-session.xml)
load merge drned-work/before-session.xml
Thu Feb  11 17:11:20.595 UTC+01:00
Loading.
0 bytes parsed in 0.00 sec (0 bytes/sec)
show config
Thu Feb  11 17:11:20.659 UTC+01:00
% No configuration changes found.
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:20.799 UTC+01:00
commit no-networking
Thu Feb  11 17:11:20.857 UTC+01:00
% No modifications to commit.
NOTE: Commit id: None
============================== sync_to()
devices device dhcp0 sync-to
Thu Feb  11 17:11:20.941 UTC+01:00
result true
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:21.840 UTC+01:00
============================== save(drned-work/after-session.cfg)
save drned-work/after-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:21.214 UTC+01:00
Saving devices device dhcp0 config


================================== 1 passed, 632 deselected, 19 warnings in 5.20s ==================================
Starting with state s-subnet3:1
=============================================== test session starts ================================================
platform linux -- Python 3.8.5, pytest-6.2.2, py-1.9.0, pluggy-0.13.1
rootdir: /opt/ncs/xmnr-run/dhcp0/test/drned-skeleton, configfile: setup.cfg
plugins: nbval-0.9.6, cov-2.10.1, pyfakefs-4.3.3
collected 633 items / 632 deselected / 1 selected

src/test_builtin.py complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:22.400 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:22.467 UTC+01:00
do show ncs-state | include "ncs-state version"
Thu Feb  11 17:11:22.526 UTC+01:00
ncs-state version 5.4.1
NOTE: Commit queues are enabled!
============================== load(./dhcp0.cfg)
load merge ./dhcp0.cfg | best-effort
Thu Feb  11 17:11:22.750 UTC+01:00
Loading.
Warning: best-effort is not supported for XML files
505 bytes parsed in 0.00 sec (174.26 KiB/sec)
commit
Thu Feb  11 17:11:22.807 UTC+01:00
% No modifications to commit.
no devices device dhcp0 ned-settings use-transaction-id
Thu Feb  11 17:11:22.875 UTC+01:00
commit
Thu Feb  11 17:11:22.933 UTC+01:00
% No modifications to commit.
devices global-settings session-pool idle-time 600
Thu Feb  11 17:11:22.995 UTC+01:00
devices global-settings commit-queue retry-attempts 2
Thu Feb  11 17:11:23.550 UTC+01:00
devices device dhcp0 trace raw
Thu Feb  11 17:11:23.115 UTC+01:00
java-vm java-logging logger com.tailf.packages.ned level level-all
Thu Feb  11 17:11:23.181 UTC+01:00
show full-configuration devices device dhcp0
devices device dhcp0
 address         127.0.0.1
 port            12022
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
 authgroup       default
 device-type netconf ned-id dhcpned-nc-1.0
 connect-timeout 60
 read-timeout    7200
 write-timeout   7200
 trace           raw
 no-lsa
 state admin-state unlocked
!

show full-configuration devices device dhcp0 device-type
Thu Feb  11 17:11:23.339 UTC+01:00
devices device dhcp0
 device-type netconf ned-id dhcpned-nc-1.0
!
show full-configuration devices device dhcp0 ssh
Thu Feb  11 17:11:23.406 UTC+01:00
devices device dhcp0
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
!
commit
Thu Feb  11 17:11:23.486 UTC+01:00
% No modifications to commit.
show full-configuration devices device dhcp0 read-timeout
Thu Feb  11 17:11:23.544 UTC+01:00
devices device dhcp0
 read-timeout 7200
!
devices device dhcp0 connect
Thu Feb  11 17:11:23.614 UTC+01:00
result true
info (admin) Connected to dhcp0 - 127.0.0.1:12022
============================== sync_from()
devices device dhcp0 sync-from
Thu Feb  11 17:11:23.701 UTC+01:00
result true
top
Thu Feb  11 17:11:23.836 UTC+01:00

test_template_raw[s-subnet3:1.state.xml]

============================== load(../states/s-subnet3:1.state.xml)
NOTE: Get load parameters from ../states/s-subnet3:1.state.xml.load
no devices device dhcp0 config
Thu Feb  11 17:11:23.914 UTC+01:00
load merge ../states/s-subnet3:1.state.xml
Thu Feb  11 17:11:23.974 UTC+01:00
Loading.
589 bytes parsed in 0.00 sec (73.84 KiB/sec)
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:24.103 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="59">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet>
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                         <range>
                           <high-addr>192.168.128.89</high-addr>
                           <low-addr>192.168.128.60</low-addr>
                         </range>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:24.183 UTC+01:00
commit-queue {
    id 1613059884198
    status completed
}
Commit complete.
NOTE: Commit id: 10842
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:24.462 UTC+01:00
.

================================== 1 passed, 632 deselected, 19 warnings in 2.71s ==================================
Transition 3/6: s-subnet3:1 ==> empty
=============================================== test session starts ================================================
platform linux -- Python 3.8.5, pytest-6.2.2, py-1.9.0, pluggy-0.13.1
rootdir: /opt/ncs/xmnr-run/dhcp0/test/drned-skeleton, configfile: setup.cfg
plugins: nbval-0.9.6, cov-2.10.1, pyfakefs-4.3.3
collected 633 items / 632 deselected / 1 selected

src/test_builtin.py complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:25.692 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:25.763 UTC+01:00
do show ncs-state | include "ncs-state version"
Thu Feb  11 17:11:25.825 UTC+01:00
ncs-state version 5.4.1
NOTE: Commit queues are enabled!
============================== load(./dhcp0.cfg)
load merge ./dhcp0.cfg | best-effort
Thu Feb  11 17:11:26.320 UTC+01:00
Loading.
Warning: best-effort is not supported for XML files
505 bytes parsed in 0.00 sec (148.90 KiB/sec)
commit
Thu Feb  11 17:11:26.900 UTC+01:00
% No modifications to commit.
no devices device dhcp0 ned-settings use-transaction-id
Thu Feb  11 17:11:26.154 UTC+01:00
commit
Thu Feb  11 17:11:26.210 UTC+01:00
% No modifications to commit.
devices global-settings session-pool idle-time 600
Thu Feb  11 17:11:26.272 UTC+01:00
devices global-settings commit-queue retry-attempts 2
Thu Feb  11 17:11:26.332 UTC+01:00
devices device dhcp0 trace raw
Thu Feb  11 17:11:26.391 UTC+01:00
java-vm java-logging logger com.tailf.packages.ned level level-all
Thu Feb  11 17:11:26.456 UTC+01:00
show full-configuration devices device dhcp0
devices device dhcp0
 address         127.0.0.1
 port            12022
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
 authgroup       default
 device-type netconf ned-id dhcpned-nc-1.0
 connect-timeout 60
 read-timeout    7200
 write-timeout   7200
 trace           raw
 no-lsa
 state admin-state unlocked
 config
  dhcp subnets subnet 192.168.128.0 255.255.255.0
   range low-addr 192.168.128.60
   range high-addr 192.168.128.89
  !
 !
!

show full-configuration devices device dhcp0 device-type
Thu Feb  11 17:11:26.612 UTC+01:00
devices device dhcp0
 device-type netconf ned-id dhcpned-nc-1.0
!
show full-configuration devices device dhcp0 ssh
Thu Feb  11 17:11:26.677 UTC+01:00
devices device dhcp0
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
!
commit
Thu Feb  11 17:11:26.750 UTC+01:00
% No modifications to commit.
show full-configuration devices device dhcp0 read-timeout
Thu Feb  11 17:11:26.814 UTC+01:00
devices device dhcp0
 read-timeout 7200
!
devices device dhcp0 connect
Thu Feb  11 17:11:26.884 UTC+01:00
result true
info (admin) Connected to dhcp0 - 127.0.0.1:12022
============================== sync_from()
devices device dhcp0 sync-from
Thu Feb  11 17:11:26.975 UTC+01:00
result true
top
Thu Feb  11 17:11:27.133 UTC+01:00

test_template_single[empty.state.xml]

============================== save(drned-work/before-session.xml)
save drned-work/before-session.xml xml devices device dhcp0 config
Thu Feb  11 17:11:27.200 UTC+01:00
Saving parts of the configuration.
============================== save(drned-work/before-session.cfg)
save drned-work/before-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:27.267 UTC+01:00
Saving devices device dhcp0 config
============================== save(drned-work/before-test.cfg)
save drned-work/before-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:27.331 UTC+01:00
Saving devices device dhcp0 config
============================== load(../states/empty.state.xml)
NOTE: Get load parameters from ../states/empty.state.xml.load
no devices device dhcp0 config
Thu Feb  11 17:11:27.407 UTC+01:00
load merge ../states/empty.state.xml
Thu Feb  11 17:11:27.466 UTC+01:00
Loading.
169 bytes parsed in 0.00 sec (30.64 KiB/sec)
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:27.606 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="71">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"
                               nc:operation="delete">
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:27.697 UTC+01:00
commit-queue {
    id 1613059887723
    status completed
}
Commit complete.
NOTE: Commit id: 10843
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:27.992 UTC+01:00
============================== rollback()
rollback configuration
Thu Feb  11 17:11:28.710 UTC+01:00
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:28.323 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="81">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet>
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                         <range>
                           <high-addr>192.168.128.89</high-addr>
                           <low-addr>192.168.128.60</low-addr>
                         </range>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:28.404 UTC+01:00
commit-queue {
    id 1613059888422
    status completed
}
Commit complete.
NOTE: Commit id: 10844
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:28.699 UTC+01:00
============================== save(drned-work/after-test.cfg)
save drned-work/after-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:28.827 UTC+01:00
Saving devices device dhcp0 config
.
### TEARDOWN, RESTORE DEVICE ###
complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:29.312 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:29.393 UTC+01:00
no devices device dhcp0 config
Thu Feb  11 17:11:29.463 UTC+01:00
top
Thu Feb  11 17:11:29.526 UTC+01:00
============================== load(drned-work/before-session.xml)
load merge drned-work/before-session.xml
Thu Feb  11 17:11:29.589 UTC+01:00
Loading.
589 bytes parsed in 0.00 sec (69.34 KiB/sec)
show config
Thu Feb  11 17:11:29.656 UTC+01:00
% No configuration changes found.
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:29.788 UTC+01:00
commit no-networking
Thu Feb  11 17:11:29.848 UTC+01:00
% No modifications to commit.
NOTE: Commit id: None
============================== sync_to()
devices device dhcp0 sync-to
Thu Feb  11 17:11:29.960 UTC+01:00
result true
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:30.105 UTC+01:00
============================== save(drned-work/after-session.cfg)
save drned-work/after-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:30.243 UTC+01:00
Saving devices device dhcp0 config


================================== 1 passed, 632 deselected, 19 warnings in 5.18s ==================================
Transition 4/6: s-subnet3:1 ==> s-subnet3:2
=============================================== test session starts ================================================
platform linux -- Python 3.8.5, pytest-6.2.2, py-1.9.0, pluggy-0.13.1
rootdir: /opt/ncs/xmnr-run/dhcp0/test/drned-skeleton, configfile: setup.cfg
plugins: nbval-0.9.6, cov-2.10.1, pyfakefs-4.3.3
collected 633 items / 632 deselected / 1 selected

src/test_builtin.py complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:31.456 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:31.535 UTC+01:00
do show ncs-state | include "ncs-state version"
Thu Feb  11 17:11:31.602 UTC+01:00
ncs-state version 5.4.1
NOTE: Commit queues are enabled!
============================== load(./dhcp0.cfg)
load merge ./dhcp0.cfg | best-effort
Thu Feb  11 17:11:31.865 UTC+01:00
Loading.
Warning: best-effort is not supported for XML files
505 bytes parsed in 0.01 sec (40.57 KiB/sec)
commit
Thu Feb  11 17:11:31.936 UTC+01:00
% No modifications to commit.
no devices device dhcp0 ned-settings use-transaction-id
Thu Feb  11 17:11:32.500 UTC+01:00
commit
Thu Feb  11 17:11:32.630 UTC+01:00
% No modifications to commit.
devices global-settings session-pool idle-time 600
Thu Feb  11 17:11:32.127 UTC+01:00
devices global-settings commit-queue retry-attempts 2
Thu Feb  11 17:11:32.189 UTC+01:00
devices device dhcp0 trace raw
Thu Feb  11 17:11:32.250 UTC+01:00
java-vm java-logging logger com.tailf.packages.ned level level-all
Thu Feb  11 17:11:32.317 UTC+01:00
show full-configuration devices device dhcp0
devices device dhcp0
 address         127.0.0.1
 port            12022
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
 authgroup       default
 device-type netconf ned-id dhcpned-nc-1.0
 connect-timeout 60
 read-timeout    7200
 write-timeout   7200
 trace           raw
 no-lsa
 state admin-state unlocked
 config
  dhcp subnets subnet 192.168.128.0 255.255.255.0
   range low-addr 192.168.128.60
   range high-addr 192.168.128.89
  !
 !
!

show full-configuration devices device dhcp0 device-type
Thu Feb  11 17:11:32.507 UTC+01:00
devices device dhcp0
 device-type netconf ned-id dhcpned-nc-1.0
!
show full-configuration devices device dhcp0 ssh
Thu Feb  11 17:11:32.563 UTC+01:00
devices device dhcp0
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
!
commit
Thu Feb  11 17:11:32.619 UTC+01:00
% No modifications to commit.
show full-configuration devices device dhcp0 read-timeout
Thu Feb  11 17:11:32.678 UTC+01:00
devices device dhcp0
 read-timeout 7200
!
devices device dhcp0 connect
Thu Feb  11 17:11:32.749 UTC+01:00
result true
info (admin) Connected to dhcp0 - 127.0.0.1:12022
============================== sync_from()
devices device dhcp0 sync-from
Thu Feb  11 17:11:32.840 UTC+01:00
result true
top
Thu Feb  11 17:11:33.400 UTC+01:00

test_template_single[s-subnet3:2.state.xml]

============================== save(drned-work/before-session.xml)
save drned-work/before-session.xml xml devices device dhcp0 config
Thu Feb  11 17:11:33.730 UTC+01:00
Saving parts of the configuration.
============================== save(drned-work/before-session.cfg)
save drned-work/before-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:33.151 UTC+01:00
Saving devices device dhcp0 config
============================== save(drned-work/before-test.cfg)
save drned-work/before-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:33.255 UTC+01:00
Saving devices device dhcp0 config
============================== load(../states/s-subnet3:2.state.xml)
NOTE: Get load parameters from ../states/s-subnet3:2.state.xml.load
no devices device dhcp0 config
Thu Feb  11 17:11:33.386 UTC+01:00
load merge ../states/s-subnet3:2.state.xml
Thu Feb  11 17:11:33.441 UTC+01:00
Loading.
589 bytes parsed in 0.00 sec (207.35 KiB/sec)
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:33.530 UTC+01:00
% No modifications to commit.

commit commit-queue sync
Thu Feb  11 17:11:33.590 UTC+01:00
% No modifications to commit.
NOTE: Commit id: None
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:33.704 UTC+01:00
============================== rollback()
rollback configuration
Thu Feb  11 17:11:33.855 UTC+01:00
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:34.227 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="99">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"
                               nc:operation="delete">
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:34.329 UTC+01:00
commit-queue {
    id 1613059894356
    status completed
}
Commit complete.
NOTE: Commit id: 10845
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:34.692 UTC+01:00
============================== save(drned-work/after-test.cfg)
save drned-work/after-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:34.830 UTC+01:00
Saving devices device dhcp0 config
1,8d0
< devices device dhcp0
<  config
<   dhcp subnets subnet 192.168.128.0 255.255.255.0
<    range low-addr 192.168.128.60
<    range high-addr 192.168.128.89
<   !
<  !
< !
F
### TEARDOWN, RESTORE DEVICE ###
complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:35.291 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:35.364 UTC+01:00
no devices device dhcp0 config
Thu Feb  11 17:11:35.434 UTC+01:00
top
Thu Feb  11 17:11:35.494 UTC+01:00
============================== load(drned-work/before-session.xml)
load merge drned-work/before-session.xml
Thu Feb  11 17:11:35.559 UTC+01:00
Loading.
589 bytes parsed in 0.01 sec (42.53 KiB/sec)
show config
Thu Feb  11 17:11:35.632 UTC+01:00
devices device dhcp0
 config
  dhcp subnets subnet 192.168.128.0 255.255.255.0
   range low-addr 192.168.128.60
   range high-addr 192.168.128.89
  !
 !
!
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:35.810 UTC+01:00
commit no-networking
Thu Feb  11 17:11:35.912 UTC+01:00
Commit complete.
NOTE: Commit id: 10846
============================== sync_to()
devices device dhcp0 sync-to
Thu Feb  11 17:11:36.111 UTC+01:00
result true
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:36.407 UTC+01:00
============================== save(drned-work/after-session.cfg)
save drned-work/after-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:36.487 UTC+01:00
Saving devices device dhcp0 config


===================================================== FAILURES =====================================================
___________________________________ test_template_single[s-subnet3:2.state.xml] ____________________________________
../drned/common/test_template.py:92: in test_template_single
    pytest.fail("The state after rollback differs from before load. " +
E   Failed: The state after rollback differs from before load. Please check before-test.cfg and after-test.cfg
============================================= short test summary info ==============================================
FAILED src/test_builtin.py::test_template_single[s-subnet3:2.state.xml] - Failed: The state after rollback differ...
================================== 1 failed, 632 deselected, 19 warnings in 5.52s ==================================
Transition failed
Starting with state s-subnet3:2
=============================================== test session starts ================================================
platform linux -- Python 3.8.5, pytest-6.2.2, py-1.9.0, pluggy-0.13.1
rootdir: /opt/ncs/xmnr-run/dhcp0/test/drned-skeleton, configfile: setup.cfg
plugins: nbval-0.9.6, cov-2.10.1, pyfakefs-4.3.3
collected 633 items / 632 deselected / 1 selected

src/test_builtin.py complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:37.605 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:37.670 UTC+01:00
do show ncs-state | include "ncs-state version"
Thu Feb  11 17:11:37.730 UTC+01:00
ncs-state version 5.4.1
NOTE: Commit queues are enabled!
============================== load(./dhcp0.cfg)
load merge ./dhcp0.cfg | best-effort
Thu Feb  11 17:11:37.943 UTC+01:00
Loading.
Warning: best-effort is not supported for XML files
505 bytes parsed in 0.00 sec (140.38 KiB/sec)
commit
Thu Feb  11 17:11:38.200 UTC+01:00
% No modifications to commit.
no devices device dhcp0 ned-settings use-transaction-id
Thu Feb  11 17:11:38.660 UTC+01:00
commit
Thu Feb  11 17:11:38.122 UTC+01:00
% No modifications to commit.
devices global-settings session-pool idle-time 600
Thu Feb  11 17:11:38.184 UTC+01:00
devices global-settings commit-queue retry-attempts 2
Thu Feb  11 17:11:38.243 UTC+01:00
devices device dhcp0 trace raw
Thu Feb  11 17:11:38.302 UTC+01:00
java-vm java-logging logger com.tailf.packages.ned level level-all
Thu Feb  11 17:11:38.367 UTC+01:00
show full-configuration devices device dhcp0
devices device dhcp0
 address         127.0.0.1
 port            12022
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
 authgroup       default
 device-type netconf ned-id dhcpned-nc-1.0
 connect-timeout 60
 read-timeout    7200
 write-timeout   7200
 trace           raw
 no-lsa
 state admin-state unlocked
 config
  dhcp subnets subnet 192.168.128.0 255.255.255.0
   range low-addr 192.168.128.60
   range high-addr 192.168.128.89
  !
 !
!

show full-configuration devices device dhcp0 device-type
Thu Feb  11 17:11:38.526 UTC+01:00
devices device dhcp0
 device-type netconf ned-id dhcpned-nc-1.0
!
show full-configuration devices device dhcp0 ssh
Thu Feb  11 17:11:38.594 UTC+01:00
devices device dhcp0
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
!
commit
Thu Feb  11 17:11:38.669 UTC+01:00
% No modifications to commit.
show full-configuration devices device dhcp0 read-timeout
Thu Feb  11 17:11:38.732 UTC+01:00
devices device dhcp0
 read-timeout 7200
!
devices device dhcp0 connect
Thu Feb  11 17:11:38.802 UTC+01:00
result true
info (admin) Connected to dhcp0 - 127.0.0.1:12022
============================== sync_from()
devices device dhcp0 sync-from
Thu Feb  11 17:11:38.888 UTC+01:00
result true
top
Thu Feb  11 17:11:39.900 UTC+01:00

test_template_raw[s-subnet3:2.state.xml]

============================== load(../states/s-subnet3:2.state.xml)
NOTE: Get load parameters from ../states/s-subnet3:2.state.xml.load
no devices device dhcp0 config
Thu Feb  11 17:11:39.900 UTC+01:00
load merge ../states/s-subnet3:2.state.xml
Thu Feb  11 17:11:39.152 UTC+01:00
Loading.
589 bytes parsed in 0.00 sec (68.64 KiB/sec)
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:39.270 UTC+01:00
% No modifications to commit.

commit commit-queue sync
Thu Feb  11 17:11:39.326 UTC+01:00
% No modifications to commit.
NOTE: Commit id: None
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:39.405 UTC+01:00
.

================================== 1 passed, 632 deselected, 19 warnings in 2.42s ==================================
Transition 5/6: s-subnet3:2 ==> empty
=============================================== test session starts ================================================
platform linux -- Python 3.8.5, pytest-6.2.2, py-1.9.0, pluggy-0.13.1
rootdir: /opt/ncs/xmnr-run/dhcp0/test/drned-skeleton, configfile: setup.cfg
plugins: nbval-0.9.6, cov-2.10.1, pyfakefs-4.3.3
collected 633 items / 632 deselected / 1 selected

src/test_builtin.py complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:40.605 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:40.662 UTC+01:00
do show ncs-state | include "ncs-state version"
Thu Feb  11 17:11:40.722 UTC+01:00
ncs-state version 5.4.1
NOTE: Commit queues are enabled!
============================== load(./dhcp0.cfg)
load merge ./dhcp0.cfg | best-effort
Thu Feb  11 17:11:40.948 UTC+01:00
Loading.
Warning: best-effort is not supported for XML files
505 bytes parsed in 0.00 sec (220.35 KiB/sec)
commit
Thu Feb  11 17:11:41.300 UTC+01:00
% No modifications to commit.
no devices device dhcp0 ned-settings use-transaction-id
Thu Feb  11 17:11:41.640 UTC+01:00
commit
Thu Feb  11 17:11:41.120 UTC+01:00
% No modifications to commit.
devices global-settings session-pool idle-time 600
Thu Feb  11 17:11:41.182 UTC+01:00
devices global-settings commit-queue retry-attempts 2
Thu Feb  11 17:11:41.241 UTC+01:00
devices device dhcp0 trace raw
Thu Feb  11 17:11:41.301 UTC+01:00
java-vm java-logging logger com.tailf.packages.ned level level-all
Thu Feb  11 17:11:41.365 UTC+01:00
show full-configuration devices device dhcp0
devices device dhcp0
 address         127.0.0.1
 port            12022
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
 authgroup       default
 device-type netconf ned-id dhcpned-nc-1.0
 connect-timeout 60
 read-timeout    7200
 write-timeout   7200
 trace           raw
 no-lsa
 state admin-state unlocked
 config
  dhcp subnets subnet 192.168.128.0 255.255.255.0
   range low-addr 192.168.128.60
   range high-addr 192.168.128.89
  !
 !
!

show full-configuration devices device dhcp0 device-type
Thu Feb  11 17:11:41.549 UTC+01:00
devices device dhcp0
 device-type netconf ned-id dhcpned-nc-1.0
!
show full-configuration devices device dhcp0 ssh
Thu Feb  11 17:11:41.632 UTC+01:00
devices device dhcp0
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
!
commit
Thu Feb  11 17:11:41.715 UTC+01:00
% No modifications to commit.
show full-configuration devices device dhcp0 read-timeout
Thu Feb  11 17:11:41.770 UTC+01:00
devices device dhcp0
 read-timeout 7200
!
devices device dhcp0 connect
Thu Feb  11 17:11:41.835 UTC+01:00
result true
info (admin) Connected to dhcp0 - 127.0.0.1:12022
============================== sync_from()
devices device dhcp0 sync-from
Thu Feb  11 17:11:41.929 UTC+01:00
result true
top
Thu Feb  11 17:11:42.950 UTC+01:00

test_template_single[empty.state.xml]

============================== save(drned-work/before-session.xml)
save drned-work/before-session.xml xml devices device dhcp0 config
Thu Feb  11 17:11:42.163 UTC+01:00
Saving parts of the configuration.
============================== save(drned-work/before-session.cfg)
save drned-work/before-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:42.245 UTC+01:00
Saving devices device dhcp0 config
============================== save(drned-work/before-test.cfg)
save drned-work/before-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:42.337 UTC+01:00
Saving devices device dhcp0 config
============================== load(../states/empty.state.xml)
NOTE: Get load parameters from ../states/empty.state.xml.load
no devices device dhcp0 config
Thu Feb  11 17:11:42.437 UTC+01:00
load merge ../states/empty.state.xml
Thu Feb  11 17:11:42.498 UTC+01:00
Loading.
169 bytes parsed in 0.00 sec (28.67 KiB/sec)
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:42.620 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="127">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"
                               nc:operation="delete">
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:42.718 UTC+01:00
commit-queue {
    id 1613059902748
    status completed
}
Commit complete.
NOTE: Commit id: 10847
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:43.330 UTC+01:00
============================== rollback()
rollback configuration
Thu Feb  11 17:11:43.135 UTC+01:00
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:43.469 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="137">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet>
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                         <range>
                           <high-addr>192.168.128.89</high-addr>
                           <low-addr>192.168.128.60</low-addr>
                         </range>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:43.553 UTC+01:00
commit-queue {
    id 1613059903566
    status completed
}
Commit complete.
NOTE: Commit id: 10848
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:43.786 UTC+01:00
============================== save(drned-work/after-test.cfg)
save drned-work/after-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:43.920 UTC+01:00
Saving devices device dhcp0 config
.
### TEARDOWN, RESTORE DEVICE ###
complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:44.395 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:44.466 UTC+01:00
no devices device dhcp0 config
Thu Feb  11 17:11:44.534 UTC+01:00
top
Thu Feb  11 17:11:44.594 UTC+01:00
============================== load(drned-work/before-session.xml)
load merge drned-work/before-session.xml
Thu Feb  11 17:11:44.655 UTC+01:00
Loading.
589 bytes parsed in 0.00 sec (64.34 KiB/sec)
show config
Thu Feb  11 17:11:44.723 UTC+01:00
% No configuration changes found.
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:44.843 UTC+01:00
commit no-networking
Thu Feb  11 17:11:44.900 UTC+01:00
% No modifications to commit.
NOTE: Commit id: None
============================== sync_to()
devices device dhcp0 sync-to
Thu Feb  11 17:11:44.987 UTC+01:00
result true
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:45.109 UTC+01:00
============================== save(drned-work/after-session.cfg)
save drned-work/after-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:45.249 UTC+01:00
Saving devices device dhcp0 config


================================== 1 passed, 632 deselected, 19 warnings in 5.29s ==================================
Transition 6/6: s-subnet3:2 ==> s-subnet3:1
=============================================== test session starts ================================================
platform linux -- Python 3.8.5, pytest-6.2.2, py-1.9.0, pluggy-0.13.1
rootdir: /opt/ncs/xmnr-run/dhcp0/test/drned-skeleton, configfile: setup.cfg
plugins: nbval-0.9.6, cov-2.10.1, pyfakefs-4.3.3
collected 633 items / 632 deselected / 1 selected

src/test_builtin.py complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:46.427 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:46.500 UTC+01:00
do show ncs-state | include "ncs-state version"
Thu Feb  11 17:11:46.565 UTC+01:00
ncs-state version 5.4.1
NOTE: Commit queues are enabled!
============================== load(./dhcp0.cfg)
load merge ./dhcp0.cfg | best-effort
Thu Feb  11 17:11:46.766 UTC+01:00
Loading.
Warning: best-effort is not supported for XML files
505 bytes parsed in 0.00 sec (111.52 KiB/sec)
commit
Thu Feb  11 17:11:46.827 UTC+01:00
% No modifications to commit.
no devices device dhcp0 ned-settings use-transaction-id
Thu Feb  11 17:11:46.893 UTC+01:00
commit
Thu Feb  11 17:11:46.950 UTC+01:00
% No modifications to commit.
devices global-settings session-pool idle-time 600
Thu Feb  11 17:11:47.130 UTC+01:00
devices global-settings commit-queue retry-attempts 2
Thu Feb  11 17:11:47.760 UTC+01:00
devices device dhcp0 trace raw
Thu Feb  11 17:11:47.137 UTC+01:00
java-vm java-logging logger com.tailf.packages.ned level level-all
Thu Feb  11 17:11:47.207 UTC+01:00
show full-configuration devices device dhcp0
devices device dhcp0
 address         127.0.0.1
 port            12022
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
 authgroup       default
 device-type netconf ned-id dhcpned-nc-1.0
 connect-timeout 60
 read-timeout    7200
 write-timeout   7200
 trace           raw
 no-lsa
 state admin-state unlocked
 config
  dhcp subnets subnet 192.168.128.0 255.255.255.0
   range low-addr 192.168.128.60
   range high-addr 192.168.128.89
  !
 !
!

show full-configuration devices device dhcp0 device-type
Thu Feb  11 17:11:47.370 UTC+01:00
devices device dhcp0
 device-type netconf ned-id dhcpned-nc-1.0
!
show full-configuration devices device dhcp0 ssh
Thu Feb  11 17:11:47.439 UTC+01:00
devices device dhcp0
 ssh host-key ssh-rsa
  key-data "AAAAB3NzaC1yc2EAAAADAQABAAABgQC42TFs7bT2EOPWumBn9OzOfsQemzHKPG8+dGZCzwtY\nhaTAU3uwjauSeDnbTL2YlwikG990VZeTrn+7lfQRQs0DSHX/Y8u49Id/oSm443i5+cPc9tjd\n5q5y1rIJoUZNflu1+u2H/HSfXlIDqJWWAtuj+TTkKxgSRM+S0AEafy7vROhmi4Q9q+eRg2jt\ngjbL5fdRY3gVidhX1Ts5Ybwc+HeP1PPmNNXBW3OcyWG5BTHKgz0K8sgK3Ki8UWpVAMV/PuNX\nuxUMYtuYqWI2OrEBLWHML+6RS7uUzklZPGOVy4L5BZtPjvz3Egbd+JjlHC6cUV9iV0P2Z4Hi\nfmvvVToFUDm2ArbLP47noD2MkHpFnuHUACxpleQztw52ySsWV26zCcvJSHobU9A6TgPCDI/0\nrVdIriPZFi9aefSzb91LZxwHyP3dAmekP4zeKVeaFd1E8A3+6r7wieFIek9xOaGBxbtGf5/3\nmPN2YMl93MA5q35S4OrE5Ede9Xl+YPiy+/fwEtc="
 !
!
commit
Thu Feb  11 17:11:47.514 UTC+01:00
% No modifications to commit.
show full-configuration devices device dhcp0 read-timeout
Thu Feb  11 17:11:47.577 UTC+01:00
devices device dhcp0
 read-timeout 7200
!
devices device dhcp0 connect
Thu Feb  11 17:11:47.652 UTC+01:00
result true
info (admin) Connected to dhcp0 - 127.0.0.1:12022
============================== sync_from()
devices device dhcp0 sync-from
Thu Feb  11 17:11:47.739 UTC+01:00
result true
top
Thu Feb  11 17:11:47.898 UTC+01:00

test_template_single[s-subnet3:1.state.xml]

============================== save(drned-work/before-session.xml)
save drned-work/before-session.xml xml devices device dhcp0 config
Thu Feb  11 17:11:47.960 UTC+01:00
Saving parts of the configuration.
============================== save(drned-work/before-session.cfg)
save drned-work/before-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:48.170 UTC+01:00
Saving devices device dhcp0 config
============================== save(drned-work/before-test.cfg)
save drned-work/before-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:48.790 UTC+01:00
Saving devices device dhcp0 config
============================== load(../states/s-subnet3:1.state.xml)
NOTE: Get load parameters from ../states/s-subnet3:1.state.xml.load
no devices device dhcp0 config
Thu Feb  11 17:11:48.143 UTC+01:00
load merge ../states/s-subnet3:1.state.xml
Thu Feb  11 17:11:48.195 UTC+01:00
Loading.
589 bytes parsed in 0.00 sec (274.94 KiB/sec)
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:48.267 UTC+01:00
% No modifications to commit.

commit commit-queue sync
Thu Feb  11 17:11:48.322 UTC+01:00
% No modifications to commit.
NOTE: Commit id: None
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:48.388 UTC+01:00
============================== rollback()
rollback configuration
Thu Feb  11 17:11:48.466 UTC+01:00
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:48.682 UTC+01:00
native {
    device {
        name dhcp0
        data <rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
                  message-id="155">
               <edit-config xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
                 <target>
                   <candidate/>
                 </target>
                 <test-option>test-then-set</test-option>
                 <error-option>rollback-on-error</error-option>
                 <config>
                   <dhcp xmlns="http://tail-f.com/ns/example/dhcpd">
                     <subnets>
                       <subnet xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"
                               nc:operation="delete">
                         <net>192.168.128.0</net>
                         <mask>255.255.255.0</mask>
                       </subnet>
                     </subnets>
                   </dhcp>
                 </config>
               </edit-config>
             </rpc>
    }
}

commit commit-queue sync
Thu Feb  11 17:11:48.760 UTC+01:00
commit-queue {
    id 1613059908774
    status completed
}
Commit complete.
NOTE: Commit id: 10849
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:48.924 UTC+01:00
============================== save(drned-work/after-test.cfg)
save drned-work/after-test.cfg  devices device dhcp0 config
Thu Feb  11 17:11:48.997 UTC+01:00
Saving devices device dhcp0 config
1,8d0
< devices device dhcp0
<  config
<   dhcp subnets subnet 192.168.128.0 255.255.255.0
<    range low-addr 192.168.128.60
<    range high-addr 192.168.128.89
<   !
<  !
< !
F
### TEARDOWN, RESTORE DEVICE ###
complete-on-space false
idle-timeout 0
ignore-leading-space true
timestamp enable
config
Thu Feb  11 17:11:49.403 UTC+01:00
Entering configuration mode terminal
Current configuration users:
admin console (cli from 127.0.0.1) on since 2021-02-11 17:11:06 terminal mode
session paginate false
Thu Feb  11 17:11:49.476 UTC+01:00
no devices device dhcp0 config
Thu Feb  11 17:11:49.546 UTC+01:00
top
Thu Feb  11 17:11:49.606 UTC+01:00
============================== load(drned-work/before-session.xml)
load merge drned-work/before-session.xml
Thu Feb  11 17:11:49.670 UTC+01:00
Loading.
589 bytes parsed in 0.00 sec (64.96 KiB/sec)
show config
Thu Feb  11 17:11:49.738 UTC+01:00
devices device dhcp0
 config
  dhcp subnets subnet 192.168.128.0 255.255.255.0
   range low-addr 192.168.128.60
   range high-addr 192.168.128.89
  !
 !
!
============================== commit()
commit dry-run  outformat native  | exclude "device dhcp0" | save overwrite drned-work/drned-dry-run.txt
Thu Feb  11 17:11:49.887 UTC+01:00
commit no-networking
Thu Feb  11 17:11:49.970 UTC+01:00
Commit complete.
NOTE: Commit id: 10850
============================== sync_to()
devices device dhcp0 sync-to
Thu Feb  11 17:11:50.131 UTC+01:00
result true
============================== compare_config()
devices device dhcp0 compare-config
Thu Feb  11 17:11:50.372 UTC+01:00
============================== save(drned-work/after-session.cfg)
save drned-work/after-session.cfg  devices device dhcp0 config
Thu Feb  11 17:11:50.504 UTC+01:00
Saving devices device dhcp0 config


===================================================== FAILURES =====================================================
___________________________________ test_template_single[s-subnet3:1.state.xml] ____________________________________
../drned/common/test_template.py:92: in test_template_single
    pytest.fail("The state after rollback differs from before load. " +
E   Failed: The state after rollback differs from before load. Please check before-test.cfg and after-test.cfg
============================================= short test summary info ==============================================
FAILED src/test_builtin.py::test_template_single[s-subnet3:1.state.xml] - Failed: The state after rollback differ...
================================== 1 failed, 632 deselected, 19 warnings in 4.61s ==================================
Transition failed
